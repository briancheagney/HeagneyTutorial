// room script file

function oGift01_Interact(Object *theObject, CursorMode mode)
{
  WalkToObjectAndPickup(theObject);
  numGifts++;
  cMonty.AddInventory(iGift01);
  String message = String.Format("You have: %d Gifts",  numGifts);
  cMonty.Say(message);
}

function oGift03_Interact(Object *theObject, CursorMode mode)
{
  WalkToObjectAndPickup(theObject);
  numGifts++;
  cMonty.AddInventory(iGift02);
  String message = String.Format("You have: %d Gifts",  numGifts);
  cMonty.Say(message);
}

function oGift02_Interact(Object *theObject, CursorMode mode)
{
  WalkToObjectAndPickup(theObject);
  numGifts++;
  cMonty.AddInventory(iGift03);
  String message = String.Format("You have: %d Gifts",  numGifts);
  cMonty.Say(message);
}

function hHotspot1_Interact(Hotspot *theHotspot, CursorMode mode)
{
if (numGifts>2){ 
  int blahx = mouse.x; // this code grabs the x,y coordinate of my mouse when it clicks on the hotspot, because hotspots DON'T have x,y coordinates.
  int blahy = mouse.y;
  cMonty.Say("I can go now");
  cMonty.Walk(blahx, blahy, eBlock); 
  cMonty.ChangeRoom(2, 837, 575, eDirectionLeft); 
}
else{
  cMonty.Say("I should probably get all 3 gifts before going...");
}
}

function oObject0_Look(Object *theObject, CursorMode mode)
{

}

function oSpoon_Interact(Object *theObject, CursorMode mode)
{
WalkToObjectAndPickup(theObject);
cMonty.AddInventory(iSpoon);
}

function oSaw_Interact(Object *theObject, CursorMode mode)
{
WalkToObjectAndPickup(theObject);
cMonty.AddInventory(iSaw);
}

function room_RepExec()
{
 if (oChord.Animating && oChord.Frame == 5)
 {
   int dist;
   float vol;
   dist = cMonty.x - oChord.X;
   //cMonty.SayBackground ("%d", dist);
   if (dist < 200 && dist > -100)
   {
    AudioChannel *zap = aElectriczap.Play();
    zap.Volume = 100;
    vol = (1.0 - (IntToFloat(dist)/100.0));
    //vol = IntToFloat(dist);
    cMonty.SayBackground ("%f", vol);
    cMonty.SayBackground ("%d", dist);
    //vol = (1/dist)*50;
    
   }
 }
 
 if (cHuman01.Animating && cHuman01.View == 5)
 {
   if (cHuman01.Loop == 1 && cHuman01.Frame == 1)
   {
     aSquirt.Play();
   }  
 }
}

function room_AfterFadeIn()
{
oChord.SetView(6, 5);
oChord.Animate(0, 5, eRepeat, eNoBlock);
}
